# Position/Order Management Service - Environment Configuration

# ===== Service Configuration =====
SERVICE_NAME=position-order-service
SERVICE_PORT=8020
SERVICE_HOST=0.0.0.0

# ===== Redis Configuration =====
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DB=0

# ===== PostgreSQL Configuration (Optional) =====
# If not configured, service runs with Redis-only (no persistence)
# Format: postgresql+asyncpg://user:password@host:port/database
DATABASE_URL=postgresql+asyncpg://postgres:postgres@localhost:5432/position_order_db

# Connection pool settings
DB_POOL_SIZE=5
DB_MAX_OVERFLOW=10
DB_POOL_TIMEOUT=30

# ===== Logging Configuration =====
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/var/log/position-order-service/service.log

# ===== WebSocket Configuration =====
WS_HEARTBEAT_INTERVAL=30
WS_MAX_RECONNECT_ATTEMPTS=5
WS_RECONNECT_DELAY=1.0

# ===== Active User Manager Configuration =====
USER_SCAN_INTERVAL=300  # 5 minutes
SYMBOL_DISCOVERY_INTERVAL=60  # 1 minute

# ===== Performance Tuning =====
WORKER_PROCESSES=2
MAX_CONCURRENT_REQUESTS=100
REQUEST_TIMEOUT=30

# ===== Monitoring & Metrics =====
ENABLE_PROMETHEUS=true
PROMETHEUS_PORT=9090

# ===== Security =====
# API Key for service-to-service communication (optional)
API_KEY=

# ===== Exchange API Keys (Stored in Redis) =====
# User-specific keys should be stored in Redis:
# Redis key format: user:{user_id}:api:keys
# Fields: api_key, api_secret, passphrase/password
