"""공통 상수 정의

프로젝트 전반에서 사용되는 공통 상수들을 정의합니다.
"""

# ============================================================================
# 지원 거래 심볼
# ============================================================================

SUPPORTED_SYMBOLS = [
    "BTC-USDT-SWAP",
    "ETH-USDT-SWAP",
    "SOL-USDT-SWAP"
]

# ============================================================================
# Redis 키 형식
# ============================================================================

# 메시지 큐 관련
MESSAGE_QUEUE_KEY = "telegram:message_queue:{okx_uid}"
MESSAGE_PROCESSING_FLAG = "telegram:processing_flag:{okx_uid}"

# 사용자 관련
USER_SETTINGS_KEY = "user:{user_id}:settings"
USER_RECENT_SYMBOLS_KEY = "user:{user_id}:recent_symbols"
USER_POSITION_KEY = "user:{user_id}:position:{symbol}:{side}"
USER_ORDER_KEY = "user:{user_id}:order:{order_id}"

# 포지션 및 주문 관련
POSITION_KEY = "position:{user_id}:{symbol}"
ORDER_KEY = "order:{order_id}"

# ============================================================================
# 모니터링 서비스 설정
# ============================================================================

MONITOR_INTERVAL = 2  # 초
ORDER_CHECK_INTERVAL = 10  # 초
MAX_RESTART_ATTEMPTS = 5
MAX_MEMORY_MB = 2048
MEMORY_CLEANUP_INTERVAL = 600  # 초
CONNECTION_TIMEOUT = 30  # 초
API_RATE_LIMIT = 5

# ============================================================================
# 캐시 설정
# ============================================================================

ORDER_STATUS_CACHE_TTL = 5  # 초
DEFAULT_CACHE_TTL = 3600  # 초 (1시간)
USER_SETTINGS_TTL = 86400 * 30  # 초 (30일)

# ============================================================================
# 로깅 설정
# ============================================================================

LOG_INTERVAL_SECONDS = 300  # 5분
LOG_MAX_BYTES = 10 * 1024 * 1024  # 10MB
LOG_BACKUP_COUNT = 5

# ============================================================================
# 기본 설정값
# ============================================================================

DEFAULT_USER_SETTINGS = {
    'use_sl': True,
    'use_break_even': False,
    'use_break_even_tp2': False,
    'use_break_even_tp3': False
}

# ============================================================================
# 주문 타입
# ============================================================================

ORDER_TYPES = {
    'TP1': 'tp1',
    'TP2': 'tp2',
    'TP3': 'tp3',
    'SL': 'sl',
    'BREAK_EVEN': 'break_even',
    'LIMIT': 'limit',
    'MARKET': 'market',
    'UNKNOWN': 'unknown'
}

VALID_ORDER_NAMES = ['tp1', 'tp2', 'tp3', 'sl', 'break_even']

# ============================================================================
# 포지션 사이드
# ============================================================================

POSITION_SIDES = {
    'LONG': 'long',
    'SHORT': 'short'
}

# ============================================================================
# Redis 데이터베이스 번호
# ============================================================================

REDIS_DB_DEFAULT = 0
REDIS_DB_BROKER = 1
REDIS_DB_BACKEND = 2

# ============================================================================
# 최근 심볼 관리
# ============================================================================

MAX_RECENT_SYMBOLS = 10  # 최대 저장할 최근 심볼 개수
